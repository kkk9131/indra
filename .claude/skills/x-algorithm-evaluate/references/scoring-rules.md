# X Algorithm Scoring Rules

## スコアリング詳細

### 基本構造

```
最終スコア = 基準スコア(50) + 加点 - 減点
最大スコア = 100
最小スコア = 0
```

---

## 加点ルール詳細

### 1. 質問形式 (+20点)

**条件**:

- ポスト末尾に「?」または「？」を含む
- 「どう思う？」「どうですか？」などの問いかけ
- 「皆さんは〜」で始まる呼びかけ

**検出パターン**:

```regex
(\?|？)$
(どう|何|なぜ|いつ|誰|どこ).*(思|考|感).*(\?|？)
皆さん.*(どう|何)
```

**根拠**: リプライはアルゴリズムで最高評価の信号

---

### 2. 適切な文字数 (+10点)

**条件**:

- 400-500文字が最適範囲（X Premium長文機能）
- 450文字前後が理想

**スコアリング**:
| 文字数 | 加点 |
| ---------- | ----- |
| 400-500 | +10 |
| 350-399 | +5 |
| 501-600 | +5 |
| それ以外 | 0 |

**根拠**: X Premium長文機能を活用した詳細な情報提供

---

### 3. 箇条書き使用 (+5点)

**条件**:

- 「・」「-」「1.」などのリスト形式
- 3項目以上の列挙

**検出パターン**:

```regex
^[\-・•]\s+.+
^[0-9]+[\.\)]\s+.+
```

**根拠**: 滞在時間向上に寄与

---

### 4. 絵文字適度 (+3点)

**条件**:

- 1-3個の絵文字使用
- 文頭・文末への配置が効果的

**許可絵文字**:

- 🔥🚀✅☝️👇👉👈 のみ使用可
- これ以外の絵文字は許可外

**減点条件**:

- 4個以上: 加点なし
- 10個以上: -5点
- 許可外絵文字: -3点（1個につき）

**根拠**: 視認性向上とタイムライン差別化

---

### 5. 外部リンクなし (+10点)

**条件**:

- `http://` `https://` を含まない
- `t.co` を含まない

**根拠**: 外部リンクは滞在時間を減少させる

---

### 6. CTA含む (+5点)

**条件**:

- 「試してみて」「教えて」「共有して」などの行動喚起
- 「詳細はスレッドで」「続きは↓」などの誘導

**検出パターン**:

```regex
(試して|教えて|共有して|シェアして|リプして)
(続き|詳細).*(スレッド|↓|下|リプ)
```

---

## 減点ルール詳細

### 1. 外部リンク単体 (-15点)

**条件**:

- URLのみ、または URL + 一言のみ

**検出**:

- 本文がURL除くと30文字未満

---

### 2. ハッシュタグ過多 (-10点)

**条件**:

- 3個以上のハッシュタグ

**検出パターン**:

```regex
(#\S+)
```

**根拠**: スパム判定リスク

---

### 3. 文字数問題

| 状態        | 減点 |
| ----------- | ---- |
| 600文字超   | -5   |
| 300文字未満 | -5   |
| 100文字未満 | -15  |

---

### 4. 攻撃的表現 (-20点)

**検出対象**:

- ネガティブワード
- 批判的な表現
- 炎上リスクのある内容

**注意**: 技術的な批評は許容

---

### 5. 句読点使用 (-5点)

**条件**:

- 「、」または「。」を含む

**検出パターン**:

```regex
[、。]
```

**根拠**: 読みやすさ向上と文字数節約（改行で区切る）

---

### 6. 許可外絵文字 (-3点)

**条件**:

- 🔥🚀✅☝️👇👉👈 以外の絵文字を含む

**減点**: 許可外絵文字1個につき-3点

**根拠**: 統一感のあるブランディング

---

## カテゴリ別評価

### replyPotential (0-100)

```
= (質問含む ? 40 : 0)
+ (意見求め ? 30 : 0)
+ (議論誘発 ? 20 : 0)
+ (CTA ? 10 : 0)
```

### engagementPotential (0-100)

```
= (共感性 : 0-30)
+ (シェア性 : 0-30)
+ (視認性 : 0-20)
+ (トレンド性 : 0-20)
```

### dwellTimePotential (0-100)

```
= (読みやすさ : 0-40)
+ (情報密度 : 0-30)
+ (構造化 : 0-30)
```

### contentQuality (0-100)

```
= (価値提供 : 0-40)
+ (正確性 : 0-30)
+ (ターゲット適合 : 0-30)
```

---

## 最終スコア計算

```javascript
function calculateScore(post) {
  let score = 50; // 基準

  // 加点
  if (hasQuestion(post)) score += 20;
  if (isOptimalLength(post)) score += 10;
  if (hasBulletPoints(post)) score += 5;
  if (hasModerateEmoji(post)) score += 3;
  if (!hasExternalLink(post)) score += 10;
  if (hasCTA(post)) score += 5;

  // 減点
  if (isLinkOnly(post)) score -= 15;
  if (hasTooManyHashtags(post)) score -= 10;
  if (isTooLong(post)) score -= 5;
  if (isTooShort(post)) score -= 5;
  if (hasOffensiveContent(post)) score -= 20;

  return Math.max(0, Math.min(100, score));
}
```

---

## 合格判定

| スコア | 判定   | アクション          |
| ------ | ------ | ------------------- |
| 70-100 | 合格   | 投稿可能            |
| 50-69  | 要改善 | x-post-refineで修正 |
| 0-49   | 不合格 | 再生成推奨          |
