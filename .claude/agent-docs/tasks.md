# indra - タスク一覧

## タスク概要

| Phase   | タスク数 | 重要度 | 状態   |
| ------- | -------- | ------ | ------ |
| Phase 1 | 12       | 必須   | 未着手 |
| Phase 2 | 8        | 必須   | 未着手 |
| Phase 3 | 10       | 必須   | 未着手 |
| Phase 4 | 8        | 中     | 未着手 |
| Phase 5 | 6        | 後期   | 未着手 |

---

## Phase 1: 基盤 + UI同時構築

### P1-1: プロジェクト初期化

| ID     | タスク                         | 重要度 | 依存   | 状態 |
| ------ | ------------------------------ | ------ | ------ | ---- |
| P1-1-1 | pnpm monorepo セットアップ     | 必須   | -      | [ ]  |
| P1-1-2 | TypeScript設定 (tsconfig.json) | 必須   | P1-1-1 | [ ]  |
| P1-1-3 | Vitest設定                     | 必須   | P1-1-2 | [ ]  |
| P1-1-4 | Oxlint/Oxfmt設定               | 中     | P1-1-1 | [ ]  |

### P1-2: CLI基本構成

| ID     | タスク                  | 重要度 | 依存           | 状態 |
| ------ | ----------------------- | ------ | -------------- | ---- |
| P1-2-1 | Commander基本構成       | 必須   | P1-1-2         | [ ]  |
| P1-2-2 | @clack/prompts統合      | 必須   | P1-2-1         | [ ]  |
| P1-2-3 | `indra chat` コマンド   | 必須   | P1-2-2, P1-4-2 | [ ]  |
| P1-2-4 | `indra config` コマンド | 必須   | P1-2-2         | [ ]  |

### P1-3: Web UI基本構成

| ID     | タスク                      | 重要度 | 依存           | 状態 |
| ------ | --------------------------- | ------ | -------------- | ---- |
| P1-3-1 | Vite + Lit プロジェクト作成 | 必須   | P1-1-1         | [ ]  |
| P1-3-2 | 接続状態表示コンポーネント  | 必須   | P1-3-1, P1-4-2 | [ ]  |
| P1-3-3 | チャットUIコンポーネント    | 必須   | P1-3-2         | [ ]  |

### P1-4: Gateway基本構成

| ID     | タスク                  | 重要度 | 依存   | 状態 |
| ------ | ----------------------- | ------ | ------ | ---- |
| P1-4-1 | Hono + ws サーバー基盤  | 必須   | P1-1-2 | [ ]  |
| P1-4-2 | WebSocketプロトコル実装 | 必須   | P1-4-1 | [ ]  |
| P1-4-3 | セッション管理・永続化  | 必須   | P1-4-2 | [ ]  |

---

## Phase 2: LLM統合

### P2-1: LLM抽象レイヤー

| ID     | タスク                              | 重要度 | 依存   | 状態 |
| ------ | ----------------------------------- | ------ | ------ | ---- |
| P2-1-1 | LLMプロバイダーインターフェース設計 | 必須   | P1-4-3 | [ ]  |
| P2-1-2 | Claudeプロバイダー実装              | 必須   | P2-1-1 | [ ]  |
| P2-1-3 | OpenAIプロバイダー実装              | 必須   | P2-1-1 | [ ]  |
| P2-1-4 | Geminiプロバイダー実装              | 必須   | P2-1-1 | [ ]  |
| P2-1-5 | Ollamaプロバイダー実装              | 必須   | P2-1-1 | [ ]  |

### P2-2: ストリーミング対応

| ID     | タスク                       | 重要度 | 依存   | 状態 |
| ------ | ---------------------------- | ------ | ------ | ---- |
| P2-2-1 | ストリーミングプロトコル拡張 | 必須   | P2-1-2 | [ ]  |
| P2-2-2 | CLI: ストリーミング表示      | 必須   | P2-2-1 | [ ]  |
| P2-2-3 | Web UI: ストリーミング表示   | 必須   | P2-2-1 | [ ]  |

---

## Phase 3: SNS連携 + 承認フロー

### P3-1: SNSコネクター

| ID     | タスク                        | 重要度 | 依存   | 状態 |
| ------ | ----------------------------- | ------ | ------ | ---- |
| P3-1-1 | SNSコネクターインターフェース | 必須   | P2-1-2 | [ ]  |
| P3-1-2 | X (Twitter) API v2 コネクター | 必須   | P3-1-1 | [ ]  |
| P3-1-3 | note コネクター               | 必須   | P3-1-1 | [ ]  |

### P3-2: 投稿作成

| ID     | タスク                     | 重要度 | 依存   | 状態 |
| ------ | -------------------------- | ------ | ------ | ---- |
| P3-2-1 | 投稿生成プロンプト設計     | 必須   | P3-1-1 | [ ]  |
| P3-2-2 | CLI: `indra post create`   | 必須   | P3-2-1 | [ ]  |
| P3-2-3 | Web UI: 投稿プレビュー画面 | 必須   | P3-2-1 | [ ]  |

### P3-3: 承認フロー

| ID     | タスク                           | 重要度 | 依存           | 状態 |
| ------ | -------------------------------- | ------ | -------------- | ---- |
| P3-3-1 | 承認キュー管理 (SQLite)          | 必須   | P3-2-1         | [ ]  |
| P3-3-2 | CLI: `indra post approve/reject` | 必須   | P3-3-1         | [ ]  |
| P3-3-3 | Web UI: 承認キュー表示           | 必須   | P3-3-1         | [ ]  |
| P3-3-4 | 投稿実行 (承認後)                | 必須   | P3-3-1, P3-1-2 | [ ]  |

---

## Phase 4: スケジュール + ダッシュボード

### P4-1: スケジューラー

| ID     | タスク                         | 重要度 | 依存   | 状態 |
| ------ | ------------------------------ | ------ | ------ | ---- |
| P4-1-1 | cronベーススケジューラー       | 中     | P3-3-4 | [ ]  |
| P4-1-2 | CLI: `indra schedule add/list` | 中     | P4-1-1 | [ ]  |
| P4-1-3 | Web UI: スケジュールカレンダー | 中     | P4-1-1 | [ ]  |

### P4-2: ダッシュボード

| ID     | タスク                 | 重要度 | 依存   | 状態 |
| ------ | ---------------------- | ------ | ------ | ---- |
| P4-2-1 | メトリクス収集基盤     | 中     | P3-3-4 | [ ]  |
| P4-2-2 | CLI: `indra status`    | 中     | P4-2-1 | [ ]  |
| P4-2-3 | Web UI: ダッシュボード | 中     | P4-2-1 | [ ]  |

### P4-3: 認証情報管理

| ID     | タスク                     | 重要度 | 依存   | 状態 |
| ------ | -------------------------- | ------ | ------ | ---- |
| P4-3-1 | credentials暗号化保存      | 中     | P1-4-3 | [ ]  |
| P4-3-2 | CLI: `indra auth` コマンド | 中     | P4-3-1 | [ ]  |

---

## Phase 5: マルチエージェント

### P5-1: マルチエージェント基盤

| ID     | タスク                   | 重要度 | 依存   | 状態 |
| ------ | ------------------------ | ------ | ------ | ---- |
| P5-1-1 | エージェント管理システム | 後期   | P2-2-1 | [ ]  |
| P5-1-2 | サブエージェント実行機構 | 後期   | P5-1-1 | [ ]  |
| P5-1-3 | タスク分散アルゴリズム   | 後期   | P5-1-2 | [ ]  |

### P5-2: UI対応

| ID     | タスク                        | 重要度 | 依存   | 状態 |
| ------ | ----------------------------- | ------ | ------ | ---- |
| P5-2-1 | CLI: エージェント管理コマンド | 後期   | P5-1-1 | [ ]  |
| P5-2-2 | Web UI: エージェント一覧      | 後期   | P5-1-1 | [ ]  |
| P5-2-3 | Web UI: フロー可視化          | 後期   | P5-1-3 | [ ]  |

---

## 重要度の定義

| レベル | 説明                         |
| ------ | ---------------------------- |
| 必須   | MVPに必要、他タスクの依存元  |
| 中     | 運用効率化、ユーザー体験向上 |
| 後期   | スケーラビリティ、高度な機能 |

## クリティカルパス

MVP達成に必要な最短経路:

```
P1-1-1 → P1-1-2 → P1-4-1 → P1-4-2 → P1-4-3
                      ↓
                  P2-1-1 → P2-1-2 → P2-2-1
                      ↓
                  P3-1-1 → P3-1-2 → P3-3-4
```

CLI/Web UIは並行開発可能だが、Gatewayとプロトコルが先行必須。
